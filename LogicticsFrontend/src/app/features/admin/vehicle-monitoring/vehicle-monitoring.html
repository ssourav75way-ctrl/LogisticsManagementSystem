<div class="page-container">
  <div class="header-row">
    <div class="title-area">
      <h1>Vehicle Monitoring</h1>
    </div>
  </div>

  <div class="filter-toolbar">
    <mat-form-field appearance="outline" class="compact-field">
      <mat-label>Status Filter</mat-label>
      <mat-select (selectionChange)="filterByStatus($event.value)">
        <mat-option value="">All Statuses</mat-option>
        <mat-option value="In Transit">In Transit</mat-option>
        <mat-option value="Idle">Idle</mat-option>
        <mat-option value="Maintenance">Maintenance</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <mat-card class="table-card">
    <mat-table [dataSource]="filteredVehicles">
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef> Vehicle </mat-header-cell>
        <mat-cell *matCellDef="let vehicle"> 
          <div class="vehicle-info">
            <mat-icon class="vehicle-icon">local_shipping</mat-icon>
            <span class="vehicle-name">{{vehicle.name}}</span>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="type">
        <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
        <mat-cell *matCellDef="let vehicle"> 
          <span class="type-tag">{{vehicle.vehicleType}}</span>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
        <mat-cell *matCellDef="let vehicle">
          <span class="status-indicator" [attr.data-status]="vehicle.status">
            {{vehicle.status}}
          </span>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="location">
        <mat-header-cell *matHeaderCellDef> Last Location </mat-header-cell>
        <mat-cell *matCellDef="let vehicle">
          <div class="location-cell">
            <mat-icon>place</mat-icon>
            {{vehicle.location}}
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let vehicle">
          <div class="action-buttons">
            <button mat-icon-button color="warn" *ngIf="vehicle.status === 'Maintenance'" title="Requires Attention">
              <mat-icon>warning_amber</mat-icon>
            </button>
            <button mat-stroked-button color="primary" (click)="openAssignDialog(vehicle)">
              UPDATE
            </button>
          </div>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </mat-card>
</div>
